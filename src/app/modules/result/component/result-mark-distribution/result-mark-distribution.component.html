<form nz-form [formGroup]="commonForm">

    <div class="card card-padding">
       
            <div class="row">
                <div class="col-lg-3"
                >
                  <label>Group Name<span style="color: red">*</span></label>
                  <nz-form-item>
                    <nz-form-control nzErrorTip="Group required!">
                      <nz-input-group>
                        <nz-select
                          formControlName="GROUP_NAME"
                          nzShowSearch
                          nzAllowClear
                          nzPlaceHolder="Select a group"
                        >
                          <nz-option *ngFor="let item of groupList" [nzLabel]="item.NAME" [nzValue]="item.CODE"></nz-option>
                        </nz-select>
                      </nz-input-group>
                    </nz-form-control>
                  </nz-form-item>
                </div>
          
          
                <div
                class="col-lg-3"
                >
                  <label>Class Name<span style="color: red">*</span></label>
                  <nz-form-item>
                    <nz-form-control nzErrorTip="Class required!">
                      <nz-input-group>
                        <nz-select
                          formControlName="CLASS_NAME"
                          nzShowSearch
                          nzAllowClear
                          nzPlaceHolder="Select a class"
                          (ngModelChange)="onSelectedClass($event)"
                        >
                        <nz-option *ngFor="let item of classList" [nzLabel]="item.NAME" [nzValue]="item.CODE"></nz-option>
          
                        </nz-select>
                      </nz-input-group>
                    </nz-form-control>
                  </nz-form-item>
                </div>
                <!-- <div class="col-lg-3" *ngIf="isSectionVisible == true">
  
                    <label>Section Name
                        <span class="required-asterisk text-danger">*</span>
                    </label>
                    <div>
                      <nz-select nzAllowClear formControlName="SECTION_NAME"
                        
                    
                        nzPlaceHolder="Select section name" 
                        [nzCustomTemplate]="defaultTemplate" nzSize="default">
                        <nz-option *ngFor="let item of sectionlist" [nzLabel]="item.NAME" [nzValue]="item.CODE"></nz-option>
                      </nz-select>
                      <ng-template #defaultTemplate let-selected>
                        {{ selected.nzLabel }}
                      </ng-template>
                     
                    </div>
          
                  </div> -->
                <div
                class="col-lg-3"
                  *ngIf="isVersionVisible == true">
                  <label>Version Name<span style="color: red">*</span></label>
                  <nz-form-item>
                    <nz-form-control nzErrorTip="Version required!">
                      <nz-input-group>
                        <nz-select
                          formControlName="VERSION_NAME"
                          nzShowSearch
                          nzAllowClear
                          nzPlaceHolder="Select a version"
                        >
                        <nz-option *ngFor="let item of versionList" [nzLabel]="item.NAME" [nzValue]="item.CODE"></nz-option>
          
                        </nz-select>
                      </nz-input-group>
                    </nz-form-control>
                  </nz-form-item>
                </div>
          
          
                <div
                class="col-lg-3"
                >
                  <label>Session Name<span style="color: red">*</span></label>
                  <nz-form-item>
                    <nz-form-control nzErrorTip="Session required!">
                      <nz-input-group>
                        <nz-select
                        (ngModelChange)="onSessionChange($event)"
                          formControlName="SESSION_NAME"
                          nzShowSearch
                          nzAllowClear
                          nzPlaceHolder="Select a session"
                        >
                        <nz-option *ngFor="let item of sessionList" [nzLabel]="item.NAME" [nzValue]="item.CODE"></nz-option>
          
                        </nz-select>
                      </nz-input-group>
                    </nz-form-control>
                  </nz-form-item>
                </div>
          
                <div
                class="col-lg-3"
                  *ngIf="isYearVisible == true">
                  <label>Year Name<span style="color: red">*</span></label>
                  <nz-form-item>
                    <nz-form-control nzErrorTip="Year required!">
                      <nz-input-group>
                        <nz-select
                          formControlName="YEAR_NAME"
                          (ngModelChange)="onYearChange($event)"
                          nzShowSearch
                          nzAllowClear
                          nzPlaceHolder="Select a year"
                        >
                        <nz-option *ngFor="let item of yearList" [nzLabel]="item.NAME" [nzValue]="item.CODE"></nz-option>
          
                        </nz-select>
                      </nz-input-group>
                    </nz-form-control>
                  </nz-form-item>
                </div>
          
          
                <div
                class="col-lg-3"
                  *ngIf="isSemesterVisible == true">
                  <label>Semester Name<span style="color: red">*</span></label>
                  <nz-form-item>
                    <nz-form-control nzErrorTip="Semester required!">
                      <nz-input-group>
                        <nz-select
                          formControlName="SEMESTER_NAME"
                          (ngModelChange)="onSemesterChange($event)"
                          nzShowSearch
                          nzAllowClear
                          nzPlaceHolder="Select a semester"
                        >
                        <nz-option *ngFor="let item of semesterList" [nzLabel]="item.NAME" [nzValue]="item.CODE"></nz-option>
          
                        </nz-select>
                      </nz-input-group>
                    </nz-form-control>
                  </nz-form-item>
                </div>
                                             
                
                <div
                class="col-lg-3"
                >
                  <label>Term Name<span style="color: red">*</span></label>
                  <nz-form-item>
                    <nz-form-control nzErrorTip="Term required!">
                      <nz-input-group>
                        <nz-select
                          formControlName="TERM_NAME"
                          nzShowSearch
                          nzAllowClear
                          nzPlaceHolder="Select a term"
                         
                        >
                        <nz-option *ngFor="let item of examTermList" [nzLabel]="item.NAME" [nzValue]="item.ID"></nz-option>
          
                        </nz-select>
                      </nz-input-group>
                    </nz-form-control>
                  </nz-form-item>
                </div>
             
         
       
  
             
          
               
  
        
              <div class="col-lg-3">
                <div class="btn-margin">
                  <button
                  nz-button
                  nzType="primary"
                  [nzLoading]="isSearchLoading"
                  type="button"
                  style="margin-top: 22px;"
                  nzDanger
                  nzSize="default"
                 class="button-search"
                 (click)="getMarkDistributionInfo(1)"
            
                >
                Search
                </button>
                
                </div>
              </div>
            </div>
     

   </div> 
   <br>
 
   <div *ngIf="isSkeletonShow">
    <nz-skeleton  [nzActive]="isActiveSkelton" [nzParagraph]="{ rows: 10 }"></nz-skeleton>
  </div>

    <div class="card card-padding" *ngIf="!isSkeletonShow">
 
          <div style="width: 50%;">
            <input class="search-box" nz-input placeholder="search here" nzSize="default"
              (keyup)="onSearchInputChange($event)" />
          </div>
     
   
        <div class="form-group row">
          <div class="col-lg-12">
            <div class="table-header " style="position: relative;">
              <nz-table #basicTable nzTableLayout="fixed" [nzData]="markChartArray"
                nzSize="small" nzShowPagination="false" nzBordered nzResponsive>
                <thead>
                
                  <tr>
                    <th style="text-align: center; vertical-align: middle; width: 3%">SL</th>
                    <th style="text-align: center; vertical-align: middle;  ">Subject Name</th>
                    <th style="text-align: center; vertical-align: middle; width: 100px;">Total Mark</th>
                    <th style="text-align: center; vertical-align: middle;width: 100px;">Pass Mark</th>
                    <th style="text-align: center; vertical-align: middle;width: 100px;">Join</th>
                    <th style="text-align: center; vertical-align: middle;width: 100px;">Join Pass</th>
                    <th style="text-align: center; vertical-align: middle;width: 100px;">Calculation</th>
                    <th style="text-align: center; vertical-align: middle; width: 150px;">
                      <button nz-button nzType="primary" nzDanger nzSize="small" nzShape="round" 
                      (click)="addEditMarkchart('Add',[])"
                      class="button-add">Add</button>
                    </th>
                  </tr>
                </thead>
              </nz-table>
            </div>
            
            <!-- Scrollable table body -->
            <div class="table-body" style="height: 250px; overflow-y: auto;">
            <div class="table-body" style="height: 300px; overflow-y: auto;">
              <nz-table #basicTable nzTableLayout="fixed" [nzData]="markChartArray"
                nzSize="small" nzShowPagination="false" nzBordered nzResponsive>
                <tbody>
                  <tr *ngFor="let row of markChartArray; let i = index"
                  [ngStyle]="getStyle(row, i)"
                  >
                    <td style="width: 3%;" >{{i+1}}</td>
                    <td >{{row.SUBJECT_NAME}}-({{row.SUBJECT_CODE}})</td>
                    <td style="width: 100px;">{{row.EXAM_TOTAL_MARK}}</td>
                    <td style="width: 100px;">{{row.TOTAL_PASS_MARK}}</td>
                    <td style="width: 100px;">{{row.IS_JOIN}}</td>
                    <td style="width: 100px;">    {{  row.JOIN_PASS_MARK}}</td>
                    <td style="width: 100px;">{{row.CALCULATION_TYPE}}</td>
                    <td style="text-align: center; vertical-align: middle; width: 150px;">
                        <a (click)="addEditMarkchart('Update',row)">Edit</a>
                      <nz-divider nzType="vertical"></nz-divider>
                      <a (click)="deleteItem(row)">Delete</a>
                    </td>
                  </tr>
                </tbody>
              </nz-table>
            </div>
          </div>
        </div>
      </div>
      </div>
  
</form>
<br>
<form [formGroup]="commonFormDwn" *ngIf="Showcopyform">

    <div class="card card-padding">
      <p style="font-weight: 600;">*If you want copy for  another class</p>
        <div class="row">
            <div class="col-lg-3"
            >
              <label>Group Name<span style="color: red">*</span></label>
              <nz-form-item>
                <nz-form-control nzErrorTip="Group required!">
                  <nz-input-group>
                    <nz-select
                      formControlName="GROUP_NAME"
                      nzDisabled
                      nzShowSearch
                      nzAllowClear
                      nzPlaceHolder="Select a group"
                    >
                      <nz-option *ngFor="let item of groupList" [nzLabel]="item.NAME" [nzValue]="item.CODE"></nz-option>
                    </nz-select>
                  </nz-input-group>
                </nz-form-control>
              </nz-form-item>
            </div>
      
      
            <div
            class="col-lg-3"
            >
              <label>Class Name<span style="color: red">*</span></label>
              <nz-form-item>
                <nz-form-control nzErrorTip="Class required!">
                  <nz-input-group>
                    <nz-select
                      formControlName="CLASS_NAME"
                      nzDisabled
                      nzShowSearch
                      nzAllowClear
                      nzPlaceHolder="Select a class"
                      (ngModelChange)="onSelectedClass($event)"
                    >
                    <nz-option *ngFor="let item of classList" [nzLabel]="item.NAME" [nzValue]="item.CODE"></nz-option>
      
                    </nz-select>
                  </nz-input-group>
                </nz-form-control>
              </nz-form-item>
            </div>
            <!-- <div class="col-lg-3" *ngIf="isSectionVisible == true">

                <label>Section Name
                    <span class="required-asterisk text-danger">*</span>
                </label>
                <div>
                  <nz-select nzAllowClear formControlName="SECTION_NAME"
                    
                  nzDisabled
                    nzPlaceHolder="Select section name" 
                    [nzCustomTemplate]="defaultTemplate" nzSize="default">
                    <nz-option *ngFor="let item of sectionlist" [nzLabel]="item.NAME" [nzValue]="item.CODE"></nz-option>
                  </nz-select>
                  <ng-template #defaultTemplate let-selected>
                    {{ selected.nzLabel }}
                  </ng-template>
                 
                </div>
      
              </div> -->
            <div
            class="col-lg-3"
              *ngIf="isVersionVisible == true">
              <label>Version Name<span style="color: red">*</span></label>
              <nz-form-item>
                <nz-form-control nzErrorTip="Version required!">
                  <nz-input-group>
                    <nz-select
                    nzDisabled
                      formControlName="VERSION_NAME"
                      nzShowSearch
                      nzAllowClear
                      nzPlaceHolder="Select a version"
                    >
                    <nz-option *ngFor="let item of versionList" [nzLabel]="item.NAME" [nzValue]="item.CODE"></nz-option>
      
                    </nz-select>
                  </nz-input-group>
                </nz-form-control>
              </nz-form-item>
            </div>
      
      
            <div
            class="col-lg-3"
            >
              <label>Session Name<span style="color: red">*</span></label>
              <nz-form-item>
                <nz-form-control nzErrorTip="Session required!">
                  <nz-input-group>
                    <nz-select
                    nzDisabled
                      formControlName="SESSION_NAME"
                      nzShowSearch
                      nzAllowClear
                      nzPlaceHolder="Select a session"
                    >
                    <nz-option *ngFor="let item of sessionList" [nzLabel]="item.NAME" [nzValue]="item.CODE"></nz-option>
      
                    </nz-select>
                  </nz-input-group>
                </nz-form-control>
              </nz-form-item>
            </div>
      
            <div
            class="col-lg-3"
              *ngIf="isYearVisible == true">
              <label>Year Name<span style="color: red">*</span></label>
              <nz-form-item>
                <nz-form-control nzErrorTip="Year required!">
                  <nz-input-group>
                    <nz-select
                    nzDisabled
                      formControlName="YEAR_NAME"
                      nzShowSearch
                      nzAllowClear
                      nzPlaceHolder="Select a year"
                    >
                    <nz-option *ngFor="let item of yearList" [nzLabel]="item.NAME" [nzValue]="item.CODE"></nz-option>
      
                    </nz-select>
                  </nz-input-group>
                </nz-form-control>
              </nz-form-item>
            </div>
      
      
            <div
            class="col-lg-3"
              *ngIf="isSemesterVisible == true">
              <label>Semester Name<span style="color: red">*</span></label>
              <nz-form-item>
                <nz-form-control nzErrorTip="Semester required!">
                  <nz-input-group>
                    <nz-select
                      nzDisabled
                      formControlName="SEMESTER_NAME"
                      nzShowSearch
                      nzAllowClear
                      nzPlaceHolder="Select a semester"
                    >
                    <nz-option *ngFor="let item of semesterList" [nzLabel]="item.NAME" [nzValue]="item.CODE"></nz-option>
      
                    </nz-select>
                  </nz-input-group>
                </nz-form-control>
              </nz-form-item>
            </div>
                                         
            
            <div
            class="col-lg-3"
            >
              <label>Term Name<span style="color: red">*</span></label>
              <nz-form-item>
                <nz-form-control nzErrorTip="Term required!">
                  <nz-input-group>
                    <nz-select
                      formControlName="TO_TERM_NAME"
                      nzShowSearch
                      nzAllowClear
                      nzPlaceHolder="Select a term"
                     
                    >
                    <nz-option *ngFor="let item of examTermList" [nzLabel]="item.NAME" [nzValue]="item.ID"></nz-option>
      
                    </nz-select>
                  </nz-input-group>
                </nz-form-control>
              </nz-form-item>
            </div>
         
     
   

         
      
           

    
          <div class="col-lg-3">
            <div class="btn-margin">
              <button
              nz-button
              nzType="primary"
              [nzLoading]="isSaveLoading"
              type="button"
              style="margin-top: 22px;"
              nzDanger
              nzSize="default"
             class="button-save"
             (click)="Save()"
        
            >
            Copy from Up Term
            </button>
            
            </div>
          </div>
        </div>
 

</div>   
</form>